(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=jQuery;var o=e.n(t);const r=document.createElement("template");function n(e,t){var o;const n=r.content.cloneNode(!0),c=n.querySelector(".alert");c.textContent=e,c.classList.add(`alert-${t}`);const a=document.querySelector(".modal-body");null==a||a.insertBefore(n,a.firstChild),null===(o=window.top)||void 0===o||o.jQuery(".mt-modal").trigger("resize")}r.innerHTML='<div class="row"><div class="col-12"><div class="alert" role="alert"></div></div></div>';const c=document.querySelector("#no-recovery-codes"),a=document.querySelector("#recovery-codes"),d=document.querySelector("#generate"),l=document.querySelector("#magic-token");function s(e){var t;0===e.length?(c.classList.remove("d-none"),a.classList.add("d-none")):(c.classList.add("d-none"),a.classList.remove("d-none"),a.querySelector("span").textContent=String(e.length),a.querySelector("code").textContent=e.join("\n"),null===(t=document.querySelector("#download-recovery-codes"))||void 0===t||t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e.join("\n"))))}s(JSON.parse(a.dataset.mtMfaTotpRecoveryCodes||"[]")),d.addEventListener("click",(e=>{document.querySelectorAll(".alert").forEach((e=>e.remove())),e.preventDefault(),window.confirm(d.dataset.mtMfaTotpConfirm)&&o().ajax({type:"POST",url:window.ScriptURI,data:{__mode:"mfa_totp_generate_recovery_codes",magic_token:l.value}}).then((function(e){let{error:t,result:o}=e;t?n(t,"danger"):(n(d.dataset.mtMfaTotpSuccess||"","success"),s((null==o?void 0:o.recovery_codes)||[]))}))}))})();